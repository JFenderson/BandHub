# ========================================
# HBCU Band Hub - Environment Configuration
# ========================================
# Copy this file to .env and update values as needed
# ========================================

# ========================================
# Environment
# ========================================
NODE_ENV="development"  # development | staging | production

# ========================================
# Database Configuration
# ========================================
# Basic connection URL format:
# DATABASE_URL="postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA"
#
# With connection pool parameters (recommended for production):
# DATABASE_URL="postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA&connection_limit=20&connect_timeout=10&pool_timeout=10"
#
# Connection pool parameters:
#   connection_limit - Maximum number of connections in the pool (default: 20)
#   connect_timeout  - Seconds to wait for a connection (default: 10)
#   pool_timeout     - Seconds to wait for a pool connection (default: 10)
#
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/hbcu_band_hub?schema=public"

# Connection Pool Settings (used by PrismaService)
# These override URL parameters and provide additional configuration
DATABASE_POOL_SIZE=20                    # Max connections in pool
DATABASE_CONNECT_TIMEOUT=10000           # Connection timeout in ms (10 seconds)
DATABASE_HEALTH_CHECK_INTERVAL=30000     # Health check interval in ms (30 seconds)
DATABASE_METRICS_LOG_INTERVAL=60000      # Metrics logging interval in ms (60 seconds, 0 to disable)

# ========================================
# Redis Configuration
# ========================================
REDIS_HOST="localhost"
REDIS_PORT="6379"
REDIS_PASSWORD=""

# ========================================
# API Configuration
# ========================================
API_PORT="3001"
API_URL="http://localhost:3001"

# ========================================
# Frontend Configuration
# ========================================
NEXT_PUBLIC_API_URL="http://localhost:3001"

# ========================================
# Authentication & Security
# ========================================
# JWT Secret - REQUIRED
# Generate with: openssl rand -hex 32
# IMPORTANT: Use different secrets for each environment!
JWT_SECRET=your_secure_jwt_secret_min_32_chars_long_here_change_me

# JWT Access Token Expiry (default: 7d)
JWT_ACCESS_EXPIRY=7d

# JWT Refresh Token Expiry (default: 30d)  
JWT_REFRESH_EXPIRY=30d

# Previous JWT Secret (for key rotation - set when rotating keys)
# JWT_PREVIOUS_SECRET=

# JWT Key Rotation Interval in days (default: 30)
JWT_ROTATION_INTERVAL_DAYS=30

# ========================================
# Secrets Management
# ========================================
# Provider: env | doppler | aws | vault (default: env)
SECRETS_PROVIDER=env

# Cache TTL in milliseconds (default: 300000 = 5 minutes)
SECRETS_CACHE_TTL=300000

# Enable/disable secrets caching (default: true)
SECRETS_CACHE_ENABLED=true

# --- Doppler Configuration ---
# DOPPLER_TOKEN=dp.st.xxx
# DOPPLER_PROJECT=bandhub
# DOPPLER_CONFIG=dev

# --- AWS Secrets Manager Configuration ---
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_SECRETS_PREFIX=bandhub/dev

# --- HashiCorp Vault Configuration ---
# VAULT_ADDR=https://vault.example.com
# VAULT_TOKEN=
# VAULT_NAMESPACE=
# VAULT_MOUNT_PATH=secret
# VAULT_SECRET_PATH=bandhub

# ========================================
# YouTube API Configuration
# ========================================
YOUTUBE_API_KEY=your_youtube_api_key_here
YOUTUBE_QUOTA_LIMIT=10000
YOUTUBE_SYNC_BATCH_SIZE=10

# ========================================
# Worker Configuration
# ========================================
WORKER_CONCURRENCY=3
MAX_YOUTUBE_CALLS_PER_MINUTE=60

# ========================================
# Security Options
# ========================================
DEBUG=true
SECURE_COOKIES=false

# ========================================
# Logging
# ========================================
LOG_LEVEL=debug  # debug | info | warn | error
LOG_FORMAT=pretty  # pretty | json